<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>断点续传</title>
  <script type="text/javascript" src="./js/lib/jquery.js"></script>
  <script type="text/javascript" src="./js/lib/spark-md5.js"></script>
  <script type="text/javascript" src="./js/fileupload.js"></script>
</head>
<body>

<input type="file" name="" id="file" multiple> <br/>
进度：<input type="" name="" id="progess" value="0"> <br/>

<button onclick="upload()">上传</button>


<script type="text/javascript">
Fileupload.fileSign(SparkMD5.ArrayBuffer.hash);

var fileupload = new Fileupload();

fileupload.init({
	upload: './php/upload.php',
	query: './php/query.php',
	merge: './php/merge.php',
  sliceSize: 4*1024*1024,
  progress: function(pre) {
    var progress = 100*pre;
    $('#progess').val(progress.toFixed(2));
  },
  complete: function() {
    alert('上传完成');
  }
});

function upload() {
  var files = document.getElementById("file");
  var file = files.files
  fileupload.addFile(file);
  fileupload.upload();
};
</script>  
</body>
</html>